---
type: task
id: task-20260123120000
title: ルール違反ドキュメントの列挙
author: takeikumi
status: completed
completed_date: 2026-01-29
priority: high
project: docs_refactor
mode: docs
context: []
dependencies: []
related_notes:
  - task_refactor_20260123
assignee: null
assigned_agent: null
due_date: null
created: 2026-01-23
updated: 2026-01-29
tags:
  - docs
  - refactor
  - audit
---

# タスク: ルール違反ドキュメントの列挙

## 目的

ドキュメントリファクタリングプロジェクトで定めたルールに違反しているドキュメントを全て特定し、列挙する。
このタスクの結果を基に、以降のリファクタリング作業を進める。

## チェック対象ルール

### 1. ファイル行数制限
- **基準**: 300行以下（できれば150行以下）
- **違反例**: 300行を超えるファイル

### 2. マークダウン構造の見出しレベル
- **基準**: 見出し３レベル（###）まで
- **違反例**: #### 以降の深い見出しを使用しているファイル

### 3. リンク切れ
- **基準**: 全てのリンクが有効であること
- **違反例**: リンク先が存在しない、または参照できないリンク

### 4. ファイル名と内容の不一致
- **基準**: ファイル名が内容を正確に表していること
- **違反例**: 
  - `project_architecture.md` にロードマップ、タスク管理、チーム運用などが含まれている
  - ファイル名と内容が一致していない

### 5. 内容重複・冗長な説明
- **基準**: 同じ内容が複数箇所に記載されていないこと
- **違反例**: 
  - フォルダ構造の説明が複数箇所にある
  - gitignore, json, templates, python コードの説明が重複している

### 6. リポジトリに含める/含めないの基準
- **基準**: 
  - **含める**: プロジェクトの構造や設計方針、作業手順、実験記録、基礎知識
  - **含めない**: 個人のメモ（references, structure や思想ノート等）
- **違反例**: 個人メモがリポジトリに含まれている
- **注意**: このルールのチェックは**今回は実施しない**。後で判断する。
  

### 7. リンク表記の統一
- **基準**: リポジトリトップからの相対パス形式 `[title](./docs/title.md)` を推奨
- **違反例**: wiki リンク形式や不統一な表記
- **注意**: このルールのチェックは**今回は実施しない**。後で判断する。

### 8. 一行の長さ
- **基準**: 約100文字以下
- **違反例**: 100文字を超える長い行

## 手順

- [x] 全てのマークダウンファイルをリストアップ
- [x] 各ファイルの行数を確認（300行超を特定）
- [x] 各ファイルの見出しレベルを確認（#### 以降の使用を特定）
- [x] リンク切れを確認（全リンクをチェック）
- [x] ファイル名と内容の一致を確認
- [x] 内容重複を確認（特にフォルダ構造、gitignore、json、templates、pythonコードの説明）
- [ ] ~~リポジトリに含めるべきでないファイルを特定（個人メモ等）~~ **今回は実施しない（後で判断）**
- [ ] ~~リンク表記の統一性を確認~~ **今回は実施しない（後で判断）**
- [x] 長い行（100文字超）を特定
- [x] 違反内容をカテゴリ別に整理してリストアップ

## チェック対象ディレクトリ

- `docs/` - プロジェクトドキュメント
- `knowledge/` - 知識ベース
  - `knowledge/tasks/` - タスク管理
  - `knowledge/zettelkasten/` - Zettelkastenノート
  - `knowledge/inbox/` - 受信箱
- `README.md` - プロジェクトルートのREADME

## 結果（実施報告）

**監査実施日**: 2026-01-29  
**チェック対象ファイル数**: 63ファイル  
**監査スクリプト**: `scripts/docs/audit_docs.py`  
**結果ファイル**: `results/docs_audit_20260129224432.json`

### 違反ファイル一覧

#### 1. ファイル行数違反（300行超）

**違反ファイル数**: 8ファイル

- `docs/project_architecture.md` (2366行) - **Critical**
- `knowledge/inbox/langchain_implementation_plan_20260112.md` (1249行) - **Critical**
- `docs/workflow_guide.md` (681行)
- `docs/scripts_guide.md` (675行)
- `README.md` (374行)
- `knowledge/inbox/archive/gtd_implementation_plan_20260101.md` (332行)
- `knowledge/inbox/reference_experiment_workflow_comparison_20260105.md` (323行)
- `knowledge/tasks/active/task_docs_manager_rules_update_20260123140000.md` (316行)

#### 2. 見出しレベル違反（#### 以降使用）

**違反ファイル数**: 10ファイル  
**総違反数**: 215箇所

主な違反ファイル:
- `docs/project_architecture.md`: 77箇所
- `docs/scripts_guide.md`: 46箇所
- `docs/workflow_guide.md`: 25箇所
- `knowledge/inbox/langchain_implementation_plan_20260112.md`: 22箇所
- `knowledge/tasks/active/task_docs_manager_rules_update_20260123140000.md`: 16箇所
- `README.md`: 6箇所
- その他4ファイル

#### 3. リンク切れ

**違反ファイル数**: 39ファイル  
**総違反数**: 96箇所

主な違反ファイル:
- `knowledge/zettelkasten/permanent/ai_knowledge_reference_in_cursor_20260104190000.md`: 10箇所
- `docs/project_architecture.md`: 4箇所
- `knowledge/zettelkasten/permanent/context_engineering_human_role_ssot_20260104183000.md`: 4箇所
- `knowledge/inbox/task_dataviewjs_master_prompt_dependencies_20260121170000.md`: 3箇所
- `knowledge/inbox/task_refactor_20260123.md`: 3箇所
- `knowledge/inbox/task_refactor_20260124.md`: 3箇所
- その他33ファイル

#### 4. ファイル名と内容の不一致

**違反ファイル数**: 7ファイル

- `docs/project_architecture.md`: ロードマップ、タスク管理など複数のトピックが含まれている可能性
- `docs/workflow_guide.md`: 多数の主要セクション（16個）が含まれており、分割を検討すべき
- `docs/scripts_guide.md`: 多数の主要セクション（8個）が含まれており、分割を検討すべき
- `knowledge/tasks/active/task_docs_manager_rules_update_20260123140000.md`: 多数の主要セクション（10個）が含まれており、分割を検討すべき
- `knowledge/tasks/active/task_docs_refactor_execute_20260123130000.md`: 多数の主要セクション（7個）が含まれており、分割を検討すべき
- `knowledge/tasks/active/task_docs_audit_20260123120000.md`: 多数の主要セクション（6個）が含まれており、分割を検討すべき
- `knowledge/tasks/projects/project_docs_refactor.md`: 多数の主要セクション（6個）が含まれており、分割を検討すべき

#### 5. 内容重複・冗長な説明

**重複パターン数**: 5パターン

- **json説明**: 19ファイルで重複（README.md, docs/project_architecture.md, docs/scripts_guide.md など）
- **フォルダ構造の説明**: 11ファイルで重複（README.md, docs/project_architecture.md, docs/scripts_guide.md など）
- **templates説明**: 13ファイルで重複（README.md, docs/project_architecture.md など）
- **pythonコード説明**: 10ファイルで重複（README.md, docs/project_architecture.md, docs/scripts_guide.md など）
- **gitignore説明**: 7ファイルで重複（docs/project_architecture.md, knowledge/inbox/task_refactor_20260123.md など）

#### 6. リポジトリに含めるべきでないファイル

**注意**: このチェックは今回は実施しない（後で判断するため）

#### 7. リンク表記の不統一

**注意**: このチェックは今回は実施しない（後で判断するため）

#### 8. 長い行（100文字超）

**違反ファイル数**: 35ファイル  
**総違反数**: 61箇所

主な違反ファイル（詳細は結果JSONファイルを参照）:
- 複数のファイルで100文字を超える行が検出されました
- コードブロック内は除外されています

## 優先順位付け

違反ファイルを優先順位別に分類しました。次のリファクタリングタスク（`task-20260123130000`）で、この優先順位に基づいて対応を進めることを推奨します。

### Critical（最優先）

**300行超のファイル（特に1000行超）**

1. `docs/project_architecture.md` (2366行)
   - ファイル名と内容の不一致も検出
   - 見出しレベル違反: 77箇所
   - リンク切れ: 4箇所
   - **対応**: 分割が必須。ロードマップ、タスク管理、チーム運用などを別ファイルに分割

2. `knowledge/inbox/langchain_implementation_plan_20260112.md` (1249行)
   - 見出しレベル違反: 22箇所
   - **対応**: 分割を検討

### High（高優先度）

**300行超のファイル + ファイル名と内容の不一致**

3. `docs/workflow_guide.md` (681行)
   - ファイル名と内容の不一致（16個の主要セクション）
   - 見出しレベル違反: 25箇所
   - **対応**: 分割を検討

4. `docs/scripts_guide.md` (675行)
   - ファイル名と内容の不一致（8個の主要セクション）
   - 見出しレベル違反: 46箇所
   - **対応**: 分割を検討

5. `README.md` (374行)
   - 見出しレベル違反: 6箇所
   - **対応**: 見出しレベルの調整

### Medium（中優先度）

**300行超のファイル + その他の違反**

6. `knowledge/inbox/archive/gtd_implementation_plan_20260101.md` (332行)
7. `knowledge/inbox/reference_experiment_workflow_comparison_20260105.md` (323行)
8. `knowledge/tasks/active/task_docs_manager_rules_update_20260123140000.md` (316行)
   - ファイル名と内容の不一致も検出

**見出しレベル違反が多いファイル**

- `docs/project_architecture.md`: 77箇所
- `docs/scripts_guide.md`: 46箇所
- `docs/workflow_guide.md`: 25箇所

**リンク切れが多いファイル**

- `knowledge/zettelkasten/permanent/ai_knowledge_reference_in_cursor_20260104190000.md`: 10箇所

### Low（低優先度）

**長い行（100文字超）**

- 35ファイルで61箇所の違反
- コードブロック内は除外済み
- リファクタリング時に併せて修正

**内容重複**

- 5つのパターンで複数ファイルに重複
- リファクタリング時にリンク参照に変更

## 次のアクション

- [x] 違反ファイルのリストを基に、優先順位を付けてリファクタリングタスクを作成
- [x] 特に深刻な違反（行数超過、ファイル名不一致）から対応開始
- 次のタスク（`task-20260123130000`）で、Critical と High 優先度のファイルからリファクタリングを開始

## 結果（実施報告）

### 実施内容

1. **監査スクリプトの作成**: `scripts/docs/audit_docs.py` を作成し、6つのチェック機能（行数、見出しレベル、リンク切れ、ファイル名不一致、内容重複、長い行）を実装
2. **監査の実行**: 63ファイルをチェックし、結果を `results/docs_audit_20260129224432.json` に保存
3. **結果の記録**: タスクファイルに違反ファイルをカテゴリ別に記録
4. **優先順位付け**: Critical、High、Medium、Low の4段階で分類

### 主な発見

- **Critical違反**: `docs/project_architecture.md` (2366行) が最大の違反
- **見出しレベル違反**: 10ファイルで215箇所
- **リンク切れ**: 39ファイルで96箇所
- **内容重複**: 5つのパターンで複数ファイルに重複

### 学び

- 自動化スクリプトにより、効率的に全ファイルをチェックできた
- 特に `docs/project_architecture.md` は複数の問題（行数超過、ファイル名不一致、見出しレベル違反）を抱えており、最優先で対応が必要

### 次のアクション

- 次のタスク（`task-20260123130000`）で、Critical と High 優先度のファイルからリファクタリングを開始

<!-- AUTO:project:start -->
- [[project_docs_refactor|project: docs_refactor]]
<!-- AUTO:project:end -->

