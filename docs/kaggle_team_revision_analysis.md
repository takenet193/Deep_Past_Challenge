# kaggle_team.mdc 改訂分析

## 現在のkaggle_team.mdcとコードベースの不一致

### 1. タスク読み取りのパスが不正確

**kaggle_team.mdc（現在）**:
- `tasks/` ディレクトリからタスクJSONを読み取ると記載

**実際の実装**:
- `tasks/current_sprint.json` から読み取る
- `task_loader.py` は `tasks/current_sprint.json` を読み込む

**修正が必要**: `tasks/` → `tasks/current_sprint.json` に修正

---

### 2. スクリプトパスの参照が古い可能性

**kaggle_team.mdc（現在）**:
- `scripts/workflow/task_loader.py` を参照（正しい）

**実際の実装**:
- `scripts/workflow/task_loader.py` が存在（正しい）
- 他のスクリプトも `scripts/workflow/` に存在

**確認が必要**: 他のスクリプト参照も確認

---

### 3. タスク読み取りの説明が不正確

**kaggle_team.mdc（現在）**:
- "未処理タスクを読み込む" と記載

**実際の実装**:
- `load_pending_tasks()` は `status: "pending"` のタスクを読み込む
- しかし、実際のシステムでは `status: "pending"` のタスクは通常存在しない
- `active/` ディレクトリのタスクは `status: "in_progress"` として扱われる
- 推奨: `load_active_tasks()` を使用

**修正が必要**: `load_pending_tasks()` → `load_active_tasks()` に修正、または両方を説明

---

### 4. 実験IDの命名規則の記載が不足

**kaggle_team.mdc（現在）**:
- 実験IDの命名規則についての記載がない

**実際の実装**:
- 実験IDは `exp[YYYYMMDDHHMMSS]_[description]` 形式（タイムスタンプ形式）
- 例: `exp20260106030720_baseline_tfidf_lr`

**修正が必要**: 実験IDの命名規則を明記

---

### 5. エージェント間の連携フローの記載が不十分

**kaggle_team.mdc（現在）**:
- "Planner → Developer → Validator → User → Validator → Docs Manager → Version Controller" と記載

**実際の実装**:
- Document Managerが最初に情報収集を行う
- より詳細なフローが定義されている（`.cursor/experiment_flow_instructions.mdc` 参照）

**修正が必要**: エージェント間の連携フローを詳細化

---

### 6. Version Controllerのコミットメッセージ規約の参照

**kaggle_team.mdc（現在）**:
- コミットメッセージ規約が記載されている
- `.cursor/version_controller_rules.mdc` への参照がある

**実際の実装**:
- `.cursor/version_controller_rules.mdc` が存在し、詳細な規約が定義されている
- 規約は正しく記載されているが、参照先の説明を追加すべき

**修正が必要**: Version Controllerルールへの参照を明確化

---

### 7. 実験レポートのYAMLフロントマターの説明

**kaggle_team.mdc（現在）**:
- 実験レポートのYAMLフロントマターの必須項目が記載されている
- `id` はタイムスタンプ形式と記載

**実際の実装**:
- `id` は `experiment_id` から "exp" を除いた値（例: "20260106030720"）
- 記載は正しいが、より明確に説明できる

**確認が必要**: 記載内容が実際の実装と一致しているか確認

---

### 8. 関連タスク・プロジェクトの検索手順

**kaggle_team.mdc（現在）**:
- Validatorのワークフローに「関連タスク・プロジェクトの検索と提案」が記載されている
- 検索手順が詳細に記載されている

**実際の実装**:
- 記載内容は実装に基づいているが、実際の使用例を追加できる

**改善案**: 実際の検索例を追加

---

### 9. ディレクトリ構造の説明が不足

**kaggle_team.mdc（現在）**:
- 実験ディレクトリの構造は記載されている
- しかし、`results/` と `experiments/` の分離についての説明が不足

**実際の実装**:
- `experiments/` に実験コード、`results/` に実験結果が保存される
- この分離についての説明を追加すべき

**修正が必要**: ディレクトリ構造の説明を追加

---

### 10. エージェントの役割定義が実装と一致しているか確認

**kaggle_team.mdc（現在）**:
- 各エージェントの役割が定義されている

**実際の実装**:
- 記載内容は実装に基づいているが、最新の実装状況を反映しているか確認が必要

**確認が必要**: 各エージェントの役割定義が最新の実装と一致しているか確認

---

## 可読性の問題と改善案

### 現在の問題点

1. **情報が散在**: エージェント間の連携フローが複数箇所に記載されている
2. **実装詳細の不足**: 実際のスクリプト実行例やファイル構造の説明が不足
3. **参照先の不明確さ**: 関連ドキュメントへの参照が散在している
4. **構成が長い**: ドキュメントが長く、必要な情報を見つけにくい

### 改善案：構成の再編成

#### 提案1: セクション構成の再編成

```markdown
# Kaggle AIオーケストレーション・チーム構成とルール

## 概要
- チームの目的と構成
- エージェント間の連携フロー（全体像）

## 重要ルール（自己ロール推定）
- 明示的な指示がない場合の動作
- 役割の推定方法

## エージェント定義

### 1. Planner
- 基本ルール
- タスク読み取り手順（実際の実装に基づく）
- 詳細仕様

### 2. Developer
- 基本ルール
- 作成するファイル（実際のディレクトリ構造に基づく）
- 実験運用ルールへの参照
- 詳細仕様

### 3. Validator
- 基本ルール
- ワークフロー（実際の実装に基づく）
- 実験レポートの構成
- 関連タスク・プロジェクトの検索手順
- 詳細仕様

### 4. Docs Manager
- 基本ルール
- 詳細仕様

### 5. Version Controller
- 基本ルール
- コミットメッセージ規約（簡潔版）
- Version Controllerルールへの参照
- 詳細仕様

## エージェント間連携ルール
- 役割の明確な分離
- 情報の流れ
- 各エージェント間の引き継ぎ手順

## 関連ドキュメント
- 各エージェントの詳細ルールへの参照
- 実験実行手順への参照
```

#### 提案2: 実装詳細の追加

- 実際のスクリプト実行例
- 実際のファイル構造に基づいた説明
- タスク読み取りの実際のコード例

#### 提案3: 参照先の明確化

- 各エージェントの詳細ルールへの参照を明確化
- 実験実行手順への参照を明確化

---

## 改訂の優先順位

### 高優先度
1. タスク読み取りのパス修正（`tasks/` → `tasks/current_sprint.json`）
2. タスク読み取りの説明修正（`load_pending_tasks()` → `load_active_tasks()`）
3. 実験IDの命名規則の明記
4. エージェント間の連携フローの詳細化

### 中優先度
5. ディレクトリ構造の説明追加
6. Version Controllerルールへの参照の明確化
7. 実際のスクリプト実行例の追加

### 低優先度
8. 構成の再編成（可読性向上）
9. 関連タスク・プロジェクトの検索例の追加




